import os
import sys

moddir = "./modules/"
sys.path.append(moddir)

def check_numeric_input(i, ll, hl):
    if (not i.isnumeric()):
        return False
    
    ii = int(i)
    if(hl == "-"):
        if (ii < ll):
            return False
    else:
        if ((ii < ll) or (ii > hl)):
            return False
    return True

def main():
    modules = os.listdir(moddir)

    mods = []
    n = 0

    print("This is the Malware Simulation Local Deployment Tool (MSLDT).")
    print("Installed modules:\n")

    for m in modules:
        mods.append(__import__(m))
        print("(" + str(n) +") " + m)
        n +=1

    print("(" + str(n) +") Exit")

    print()
    print("Which module do you want to use?:\n")

    opt = 0
    while opt != n:
        opt = input("Select a tool to execute: ")

        if(not check_numeric_input(opt, 0, n)):
            print("Bad input. Try again.")
            print()
            continue

        if(int(opt) == n):
            sys.exit()
        else:
            mods[int(opt)].main()
            sys.exit()

if __name__ == "__main__":
    main()