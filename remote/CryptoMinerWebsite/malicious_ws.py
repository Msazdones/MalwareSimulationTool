from flask import Flask, render_template, session, request
import random
import string

from multiprocessing import Manager
from ctypes import c_char_p

app = Flask(__name__, static_url_path='',  static_folder='web/static', template_folder='web/templates')

man = Manager()
laststr = man.Value(c_char_p, "")

@app.route('/')
def plots():
    return render_template('malicioussite.html')

@app.route('/download')
def download():
    size = int(request.args["size"])
    print(size)

    if(len(laststr.value) == size):
        return laststr.value
    else:    
        laststr.value = ''.join(random.choice(string.ascii_letters) for i in range(size))
        return laststr.value

if __name__ == '__main__':
    app.run(host="0.0.0.0", port=5555)

